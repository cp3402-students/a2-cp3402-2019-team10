(function(a){a.fn.serializeArrayAll=function(){var d={};var c=this.serializeArray();a.each(c,function(){if(d[this.name]!==undefined){if(!d[this.name].push){d[this.name]=[d[this.name]]}d[this.name].push(this.value||"")}else{d[this.name]=this.value||""}});var b=a("input[type=radio],input[type=checkbox]",this);a.each(b,function(){if(!d.hasOwnProperty(this.name)){d[this.name]=""}});return d};a(document).on("ready",function(){a('input[name="ig_select_from"]').on("change",function(){if(this.value=="username"){a("#ig-select-tag-wrap").hide(500,function(){a("#ig-select-username-wrap").show().addClass("active")}).removeClass("active")}else{a("#ig-select-username-wrap").hide(500,function(){a("#ig-select-tag-wrap").show().addClass("active")}).removeClass("active")}});a('input[name="ig_display_type"]').on("change",function(){if(this.value=="gallery"){a("#ig-section-as-carousel").hide(500,function(){a("#ig-section-as-galllery").show().addClass("active")}).removeClass("active")}else{if(this.value=="carousel"){a("#ig-section-as-galllery").hide(500,function(){a("#ig-section-as-carousel").show().addClass("active")}).removeClass("active")}}});a("#insta_hover-color-choose").on("change",function(){a('input[name="insta_hover-color"]').val(a(this).val())});a('input[name="insta_hover-color"]').on("change",function(){var f=a(this).val();if(f!=""){var e=/^#[0-9A-F]{6}$/i.test(f);if(!e){alert("please enter valid color code");a(this).val("");return}a("#insta_hover-color-choose").val(a(this).val())}else{a("#insta_hover-color-choose").val("#007aff")}});a('input[name="insta_instalink"]').on("change",function(){if(this.checked){a("#ig-section-igbtn").show("slow").addClass("active")}else{a("#ig-section-igbtn").hide("slow").removeClass("active")}});a("#insta_car-navarrows-color-choose").on("change",function(){a('input[name="insta_car-navarrows-color"]').val(a(this).val())});a('input[name="insta_car-navarrows-color"]').on("change",function(){var f=a(this).val();if(f!=""){var e=/^#[0-9A-F]{6}$/i.test(f);if(!e){alert("please enter valid color code");a(this).val("");return}a("#insta_car-navarrows-color-choose").val(a(this).val())}else{a("#insta_car-navarrows-color-choose").val("#c32a67")}});a("#insta_instalink-bgcolor-choose").on("change",function(){a('input[name="insta_instalink-bgcolor"]').val(a(this).val())});a('input[name="insta_instalink-bgcolor"]').on("change",function(){var f=a(this).val();if(f!=""){var e=/^#[0-9A-F]{6}$/i.test(f);if(!e){alert("please enter valid color code");a(this).val("");return}a("#insta_instalink-bgcolor-choose").val(a(this).val())}else{a("#insta_instalink-bgcolor-choose").val("#c32a67")}});a("#insta_instalink-hvrcolor-choose").on("change",function(){a('input[name="insta_instalink-hvrcolor"]').val(a(this).val())});a('input[name="insta_instalink-hvrcolor"]').on("change",function(){var f=a(this).val();if(f!=""){var e=/^#[0-9A-F]{6}$/i.test(f);if(!e){alert("please enter valid color code");a(this).val("");return}a("#insta_instalink-hvrcolor-choose").val(a(this).val())}else{a("#insta_instalink-hvrcolor-choose").val("#da894a")}});function c(f){if(f){if(!a(".ig_adv-setting .ig-spinner img").length){var e='<img src="'+f+'" class="ig-spin" />';a(".ig_adv-setting .ig-spinner").append(e)}else{a(".ig_adv-setting .ig-spinner img").attr("src",f)}a(".ig_adv-setting .ig-spinner .ig-spin").hide();a(".ig_adv-setting .ig-spinner img").show()}else{a(".ig_adv-setting .ig-spinner .ig-spin").show();a(".ig_adv-setting .ig-spinner img").remove()}}var d=a('input[name="igs_spinner_image_id"]'),b=a("#igs-spinner_reset");a('.ig_adv-setting input[name="igs-spinner"]').trigger("change");a(".ig_adv-setting-toggle").on("click",function(){a(this).toggleClass("active");a(".ig_adv-setting").slideToggle()});a("#ig-adv-setting").on("submit",function(h){h.preventDefault();var f=a(this),g=f.find(".spinner");a.ajax({url:ajaxurl,type:"post",dataType:"JSON",data:{action:"igara_save_igadvs",igs_flush:f.find("input[name=igs_flush]").is(":checked")||0,igs_spinner_image_id:f.find("input[name=igs_spinner_image_id]").val(),ig_nonce:f.find("input[name=ig_nonce]").val()},beforeSend:function(){g.addClass("is-active")},success:function(e){if(e.success){console.log(e.data)}},complete:function(){g.removeClass("is-active")},error:function(e,i){console.log(i)}})});b.click(function(){d.val("");c();a(this).hide()});if(d.val()==""){b.hide()}if(d.data("misrc")!=""){c(d.data("misrc"))}a("#igs-spinner_media_manager").click(function(g){g.preventDefault();var f;if(f){f.open()}f=wp.media({title:"Select Media",multiple:false,library:{type:"image",}});f.on("close",function(){var k=f.state().get("selection");if(k.length){var e=new Array();var h=0,l;k.each(function(i){e[h]=i.id;l=i.attributes.url;h++});var j=e.join(",");d.val(j);c(l)}if(d.val()==""){b.hide()}else{b.show()}});f.on("open",function(){var h=f.state().get("selection");var e=d.val().split(",");e.forEach(function(i){attachment=wp.media.attachment(i);attachment.fetch();h.add(attachment?[attachment]:[])})});f.open()});a("#ig-generate-token").on("submit",function(h){h.preventDefault();var f=a(this),g=f.find(".spinner");a.ajax({url:ajaxurl,type:"post",data:{action:"igara_generate_token",ig_client_id:f.find("input[name=ig_client_id]").val(),ig_client_secret:f.find("input[name=ig_client_secret]").val(),ig_nonce:f.find("input[name=ig_nonce]").val()},beforeSend:function(){g.addClass("is-active")},success:function(e){if(e.success){setTimeout(function(){window.location.href=e.data},300)}else{alert(e.data)}},complete:function(){g.removeClass("is-active")},error:function(e,i){console.log(i)}})});a("#ig-remove-token").on("submit",function(h){h.preventDefault();var i=confirm("Are you sure want to delete this Token?");if(!i){return false}var f=a(this),g=f.find(".spinner");a.ajax({url:ajaxurl,type:"post",data:{action:"igara_remove_token",ig_access_token:f.find("input[name=ig_access_token]").val(),ig_nonce:f.find("input[name=ig_nonce]").val()},beforeSend:function(){g.addClass("is-active")},success:function(e){if(e.success){setTimeout(function(){window.location.href=window.location.href},300)}else{alert(e.data)}},complete:function(){g.removeClass("is-active")},error:function(e,j){console.log(j)}})});a("#ig-update-token").on("submit",function(h){h.preventDefault();var f=a(this),g=f.find(".spinner");a.ajax({url:ajaxurl,type:"post",data:{action:"igara_update_token",ig_access_token:f.find("input[name=ig_access_token]").val(),ig_nonce:f.find("input[name=ig_nonce]").val()},beforeSend:function(){g.addClass("is-active")},success:function(e){if(e.success){setTimeout(function(){window.location.href=window.location.href},300)}else{alert(e.data)}},complete:function(){g.removeClass("is-active")},error:function(e,i){console.log(i)},})});a("#ig-update-form").on("submit",function(h){h.preventDefault();var f=a(this),g=f.find(".spinner");a.ajax({url:ajaxurl,type:"post",data:a.param(f.serializeArrayAll())+"&"+a.param({action:"igara_update_form"}),beforeSend:function(){g.addClass("is-active")},success:function(e){if(e.success){setTimeout(function(){window.location.href=window.location.href},300)}else{alert(e.data)}},complete:function(){g.removeClass("is-active")},error:function(e,i){console.log(i)},})});a(".ig-form-item-delete").on("click",function(i){i.preventDefault();var j=confirm("Are you sure want to delete this item?");if(!j){return false}var f=a(this),h=f.closest("tr"),g=h.find(".spinner");a.ajax({url:ajaxurl,type:"post",data:{action:"igara_form_item_delete",item_id:f.data("item_id")},beforeSend:function(){g.addClass("is-active")},success:function(e){if(e.success){h.fadeOut()}else{alert(e.data)}},complete:function(){setTimeout(function(){h.remove()},600)},error:function(e,k){console.log(k)},})})})})(jQuery);